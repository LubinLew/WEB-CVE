# CVE-2020-1947

## Description

In Apache ShardingSphere(incubator) 4.0.0-RC3 and 4.0.0, the 
ShardingSphere's web console uses the SnakeYAML library for parsing YAML
 inputs to load datasource configuration. SnakeYAML allows to unmarshal 
data to a Java type By using the YAML tag. Unmarshalling untrusted data 
can lead to security flaws of RCE.

| Item           | Value                 | Remark    |
| -------------- | --------------------- | --------- |
| Risk Level     | HIGH                  |           |
| Attack Type    | Remote Code Execution |           |
| Attack Postion | Request Body          |           |
| Principle      |                       | SnakeYAML |

## Environment

`centos`:7.8.2003 + `jdk`:8u261 +  `shardingsphere`:4.0.0 + `zookeeper`:3.6.2

```bash
# downlaod docker(include php-fpm and nginx)
docker pull lubinlew/cve-2020-1947

# run the docker
docker run -d -p 40080:80 --name cve-2020-1947 lubinlew/cve-2019-1947:latest
```

## Reappear

TODO

## References

[[CVE-2020-1947]Apache ShardingSphere UI YAML RCE](https://www.freesion.com/article/5095402881/)

[CVE-2020-1947 Sharding-UI的反序列化复现及分析 ](https://www.cnblogs.com/potatsoSec/p/12461330.html)
